{% extends 'base.html.twig' %}

{% block title %}{{ promo.name }}{% endblock %}

{% block body %}
<h1>{{ promo.name }}</h1>

<table class="table">
    <tbody>
        <tr>
            <th>Id</th>
            <td>{{ promo.id }}</td>
        </tr>
        <tr>
            <th>Name</th>
            <td>{{ promo.name }}</td>
        </tr>
        <tr>
            <th>Lien</th>
            <td>
                <a href="{{url('app_register')}}?token={{ promo.token }}">
                    {{url('app_register')}}?...
                </a>
                <button class="btn btn-primary btn-lg"
                    onclick="navigator.clipboard.writeText(`{{url('app_register') ~ '?token=' ~ promo.token }}`); alert('Lien copié !');">
                    <i class="fas fa-copy"></i>
                </button>
            </td>
        </tr>
    </tbody>
</table>

<a href="{{ path('promo_index') }}">back to list</a>

<a href="{{ path('promo_edit', {'id': promo.id}) }}">edit</a>

{{ include('promo/_delete_form.html.twig') }}

<h2>Leurs TPs</h2>

<p><a href="{{path('render_new', {'id': promo.id}) }}">Ajouter un TP</a></p>

<table class="table">
    <thead>
        <tr>
            <th>Nom</th>
            <th>Module</th>
            <th>Début</th>
            <th>Fin</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>

        {% for render in promo.renders %}

        <tr>
            <td>{{ render.exercice.name }}</td>
            <td>{{ render.exercice.module.name }}</td>
            <td>{{ render.dateBegin ? render.dateBegin|date('d/m/Y h:i:s') : '' }}</td>
            <td>{{ render.dateEnd ? render.dateEnd|date('d/m/Y h:i:s') : '' }}</td>
            <td><a href="{{ path('render_edit', {'id': render.id}) }}">edit</a>

                {{ include('render/_delete_form.html.twig') }}</td>
        </tr>

        {% endfor %}

    </tbody>
</table>
{% endblock %}